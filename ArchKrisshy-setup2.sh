#!/bin/sh
#github-action genshdoc
#
#step2
#ArchKrisshy
#Arch Linux Automated Installer
#Code by KrisshyDesign @Indonesia
#     Execute this script if you has login into arch-chroot prgoress
time_zone="$(curl -f -s https://ipapi.co/timezone)"
ip_address=$(curl -f -s ifconfig.io)
####################################################################################
cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.bak
curl -s -o /etc/pacman.d/mirrorlist https://serverkrisshy.github.io/mirrorlist
pacman -Suy --noconfirm --needed archlinux-keyring pacman-mirrorlist pacman-contrib terminus-font
setfont ter-v22n
####################################################################################
clear
clear
clear
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                            Automated Arch Linux Installer
------------------------------------------------------------------------------------
                           Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
"
echo
root_check() {
    if [[ "$(id -u)" != "0" ]]; then
        echo -ne "ERROR! This script must be run under the 'root' user!\n"
        exit 0
    fi
}

docker_check() {
    if awk -F/ '$2 == "docker"' /proc/self/cgroup | read -r; then
        echo -ne "ERROR! Docker container is not supported (at the moment)\n"
        exit 0
    elif [[ -f /.dockerenv ]]; then
        echo -ne "ERROR! Docker container is not supported (at the moment)\n"
        exit 0
    fi
}

arch_check() {
    if [[ ! -e /etc/arch-release ]]; then
        echo -ne "ERROR! This script must be run in Arch Linux!\n"
        exit 0
    fi
}

pacman_check() {
    if [[ -f /var/lib/pacman/db.lck ]]; then
        echo "ERROR! Pacman is blocked."
        echo -ne "If not running remove /var/lib/pacman/db.lck.\n"
        exit 0
    fi
}

background_checks() {
    root_check
    arch_check
    pacman_check
    docker_check
}
background_checks
echo
####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                            Automated Arch Linux Installer
------------------------------------------------------------------------------------
                           Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
             Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
####################################################################################
useradd -m -g users -G wheel krisshy # change the krisshy word for change username
sed -i 's/^#CacheDir/CacheDir/' /etc/pacman.conf
sed -i 's/^#LogDir/LogDir/' /etc/pacman.conf
sed -i 's/^#Color/Color/' /etc/pacman.conf
sed -i 's/^#ParallelDownloads/ParallelDownloads/' /etc/pacman.conf
sed -i 's/^#ILoveCandy/ILoveCandy/' /etc/pacman.conf
sed -i 's/^#VerbosePkgLists/VerbosePkgLists/' /etc/pacman.conf
sed -i "/\[multilib\]/,/Include/"'s/^#//' /etc/pacman.conf
####################################################################################
echo "greenDay-X1" >> /etc/hostname
#curl -o /etc/hosts https://serverkrisshy.github.io/hosts
# change the greenDay-X1 word for change hostname
echo "127.0.0.1         localhost.localdomain           localhost" >> /etc/hosts
echo "::1                       localhost.localdomain           localhost" >> /etc/hosts
echo "127.0.0.1         greenDay-X1.localdomain         greenDay-X1" >> /etc/hosts
# Result
#127.0.0.1   localhost.localdomain    localhost
#::1         localhost.localdomain    localhost
#127.0.1.1   greenDay-X1.localdomain  greenDay-X1
clear
####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
             Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Setting up Localtime
------------------------------------------------------------------------------------
"
echo
echo
####################################################################################
ln -sf /usr/share/zoneinfo/$time_zone /etc/localtime
hwclock --systohc
sed -i 's/^#id_ID.UTF-8 UTF-8/id_ID.UTF-8 UTF-8/' /etc/locale.gen
sed -i 's/^#en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen
locale-gen
echo LANG=id_ID.UTF-8 >> /etc/locale.conf
echo LANG=en_US.UTF-8 >> /etc/locale.conf
####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
             Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing X11 Application
------------------------------------------------------------------------------------
"
echo
#X11 App
pacman -Sy libwnck3 mesa-utils xf86-input-libinput xorg-xdpyinfo xorg-server xorg-xinit xorg-xinput xorg-xkill xorg-xrandr

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing GPU Driver
------------------------------------------------------------------------------------
"
echo
#GPU Driver
pacman -Sy xf86-video-ati intel-media-driver libvdpau-va-gl lib32-vulkan-intel vulkan-intel libva-intel-driver libva-utils lib32-mesa

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing Network Driver
------------------------------------------------------------------------------------
"
echo
#Networking
pacman -Sy b43-fwcutter broadcom-wl-dkms dhclient dnsmasq ethtool iwd modemmanager networkmanager networkmanager-openconnect networkmanager-openvpn nss-mdns usb_modeswitch wpa_supplicant xl2tpd

systemctl enable NetworkManager.service

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing Package Manager
------------------------------------------------------------------------------------
"
echo
#Packacge Management
pacman -Sy downgrade pkgfile rebuild-detector

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                         Installing Desktop Integration
------------------------------------------------------------------------------------
"
echo
#Desktop Integration
pacman -Sy accountsservice bash-completion bluedevil bluez bluez-utils ffmpegthumbnailer gst-libav gst-plugin-pipewire gst-plugin-bad gst-plugin-ugly libdvdcss libgsf libopenraw mlocate poppler-glib xdg-user-dirs xdg-utils

systemctl enable bluetooth.service

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                          Installing Filesystem Manager
------------------------------------------------------------------------------------
"
echo
#Filesystem
pacman -Sy haveged nfs-utils nilfs-utils ntp smartmontools unrar unzip xz partitionmanager

systemctl enable ntpd.service
####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                                Installing Fonts
------------------------------------------------------------------------------------
"
echo
#Fonts
pacman -Sy otf-comicshanns-nerd ttf-daddytime-mono-nerd ttf-nerd-fonts-sysmbols ttf-nerd-fonts-symbols-mono ttf-nerd-fonts-sysmbols-common ttf-firacode-nerd ttf-jetbrains-mono-nerd ttf-meslo-nerd awesome-terminal-fonts otf-font-awesome ttf-font-awesome ttf-roboto

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                           Installing Audio Controller
------------------------------------------------------------------------------------
"
echo
#Audio
pacman -Sy alsa-firmware alsa-plugins alsa-utils pavucontrol pipewire-pulse wireplumber pipewire-alsa pipewire-jack rtkit

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                          Installing Hardware Detector
------------------------------------------------------------------------------------
"
echo
#Hardware
pacman -Sy dmidecode dmraid hdparm hwdetect lsscsi mtools sg3_utils sof-firmware

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                          Installing Power Management
------------------------------------------------------------------------------------
"
echo
#Power Management
pacman -Sy power-profiles-daemon upower

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing CPU Microcode
------------------------------------------------------------------------------------
"
echo
#CPU specific microcode update packages
pacman -Sy intel-ucode

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                        Installing Recomended Application
------------------------------------------------------------------------------------
"
echo
#Application selection
pacman -Sy duf findutils fsarchiver git glances hwinfo inxi meld nano-syntax-highlighting pv python-defusedxml python-packaging rsync tldr sed wget nano exa lsd neofetch yakuake gwenview okular hanura zsh less man-db firefox telegram-desktop

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                               Installing Firewall
------------------------------------------------------------------------------------
"
echo
#Firewall
pacman -Sy plasma-firewall firewalld fwupd python-pyqt5 python-capng

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                              Installing LTS Kernel
------------------------------------------------------------------------------------
"
echo
#LTS Kernel
pacman -Sy linux-lts linux-lts-headers

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                           Installing Printing Support
------------------------------------------------------------------------------------
"
echo
#Printing support
pacman -Sy cups cups-browsed cups-filter cups-pdf foomatic-db foomatic-db-engine foomatic-db-gutenprint-ppds foomatic-db-nonfree foomatic-db-nonfree-ppds foomatic-db-ppds ghostscript gsfonts gutenprint splix system-config-printer python-reportlab

systemctl enable cups.service
####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                 Installing Programming Language and Code Editor
------------------------------------------------------------------------------------
"
echo
#Dev packages
pacman -Sy cmake extra-cmake-modules go ruby python python-pip rust devtools code intellij-idea-community-edition

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing Login Screen
------------------------------------------------------------------------------------
"
echo
#Login Screen
pacman -Sy sddm sddm-kcm

systemctl enable sddm-kcm.service
####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                         Installing Desktop Environment
------------------------------------------------------------------------------------
"
echo
#Desktop Environment
pacman -Sy plasma-desktop plasma-meta

####################################################################################
mkinitcpio -P linux
mkinitcpio -P linux-lts
####################################################################################

clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
            Enjoy your Coffee this progress may take a several minutes
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                            Installing GRUB Bootloader
------------------------------------------------------------------------------------
"
#mkdir -p /boot/efi
#mount /dev/nvme0n1p1 /boot/efi
pacman-key --init
pacman-key --populate archlinux
pacman -Suy --needed --noconfirm dosfstools grub efibootmgr efitools lvm2 os-prober
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck
cp /usr/share/locale/en\@quot/LC_MESSAGES/grub.mo /boot/grub/locale/en.mo
grub-mkconfig -o /boot/grub/grub.cfg
#sed -i 's/^# %wheel ALL=(ALL) ALL/%wheel ALL=(ALL) ALL/' /etc/sudoers
sed -i 's/^# %wheel ALL=(ALL:ALL) ALL/%wheel ALL=(ALL:ALL) ALL/' /etc/sudoers

####################################################################################
clear
echo -ne "
------------------------------------------------------------------------------------
 █████╗ ██████╗  ██████╗██╗  ██╗██╗  ██╗██████╗ ██╗███████╗███████╗██╗  ██╗██╗   ██╗
██╔══██╗██╔══██╗██╔════╝██║  ██║██║ ██╔╝██╔══██╗██║██╔════╝██╔════╝██║  ██║╚██╗ ██╔╝
███████║██████╔╝██║     ███████║█████╔╝ ██████╔╝██║███████╗███████╗███████║ ╚████╔╝
██╔══██║██╔══██╗██║     ██╔══██║██╔═██╗ ██╔══██╗██║╚════██║╚════██║██╔══██║  ╚██╔╝
██║  ██║██║  ██║╚██████╗██║  ██║██║  ██╗██║  ██║██║███████║███████║██║  ██║   ██║
╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚══════╝╚══════╝╚═╝  ╚═╝   ╚═╝
------------------------------------------------------------------------------------
                          Automated Arch Linux Installer
------------------------------------------------------------------------------------
                         Code by KrisshyDesign @Indonesia
------------------------------------------------------------------------------------
                     Hang in there, this progress almost done
------------------------------------------------------------------------------------
"
echo
echo -ne "
------------------------------------------------------------------------------------
                          Setting up & Enabling Service
------------------------------------------------------------------------------------
"
echo
systemctl enable --now cups.service
echo "Cups Service enabled"
systemctl enable --now ntpd.service
echo "NTP Service enabled"
systemctl enable --now NetworkManager.service
echo "Network Service enabled"
systemctl enable --now sddm-kcm.service
echo "Login Screen Service enabled"
systemctl enable --now bluetooth.service
echo "Bluetooth Service enabled"
systemctl enable --now avahi-daemon.service
echo "Avahi Service enabled"
systemctl enable --now firewalld.service
echo "Firewall Service enabled"
updatedb
echo -ne "
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
                        The installation is Done very well
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
             Please to setting up your Root password and User password
------------------------------------------------------------------------------------
                 And then exit, umount -A --recursive /mnt, reboot
------------------------------------------------------------------------------------
                    Dont forget to eject the installation media
------------------------------------------------------------------------------------
"
echo
echo "Just typing"
echo "Example : passwd"
echo "and then"
echo "Example : passwd USER"
echo
echo
